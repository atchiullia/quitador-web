<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Simulador Snowball - Entrada Dinâmica</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script>
    function adicionarEmprestimo() {
      const container = document.getElementById("emprestimos-container");
      const index = container.children.length;
      const div = document.createElement("div");
      div.className = "emprestimo-row";
      div.innerHTML = `
        <input type="text" name="nome[]" placeholder="Nome do empréstimo" required />
        <input type="number" step="0.01" min="0" name="saldo[]" placeholder="Saldo devedor" required />
        <input type="number" step="0.01" min="0" name="parcela[]" placeholder="Parcela mensal" required />
        <input type="number" step="0.01" min="0" name="juros[]" placeholder="Juros mensal (%)" required />
        <button type="button" onclick="removerEmprestimo(this)">❌</button>
      `;
      container.appendChild(div);
    }

    function removerEmprestimo(button) {
      button.parentNode.remove();
    }

    window.onload = () => {
      adicionarEmprestimo(); // Inicia com 1 linha
    }
  </script>
  <style>
    .emprestimo-row {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }
    .emprestimo-row input {
      flex: 1;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Simulador de Quitação - Estratégia Snowball</h1>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flashes">
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
    <form method="POST">
      <fieldset>
        <legend>Empréstimos</legend>
        <div id="emprestimos-container"></div>
        <button type="button" onclick="adicionarEmprestimo()">+ Adicionar Empréstimo</button>
      </fieldset>

      <label for="aporte_fixo">Aporte Fixo Inicial (ex: 1127):</label>
      <input type="text" id="aporte_fixo" name="aporte_fixo" placeholder="0" value="0" required />

      <label for="aporte_extra">Aporte Extra Mensal (ex: 500):</label>
      <input type="text" id="aporte_extra" name="aporte_extra" placeholder="0" value="0" required />

      <button type="submit">Simular e Baixar Excel</button>
    </form>
  </div>
</body>
</html>
